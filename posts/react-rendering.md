---
title: React Rendering
date: 2025-02-01
category: "React"
description: React Rendering 이해하기
---

## 이 글을 쓰게 된 이유

React 렌더링 과정을 설명하는 영상도 많고, 블로그 자료도 많지만 이것들을 보면서 제가 정말로 이 과정을 이해하고 있는 것인지 의문이 들었습니다. 자료들을 볼 때는 '아 이렇게 동작하는구나' 하고 이해하는 것 같지만 막상 시간이 지난 후 누군가에게 설명을 해야할 때 문제가 생겼습니다. 스스로도 '왜?' 라는 질문에 대답을 못하였습니다.

React가 어떤 문제를 해결하는지 이해하지 못한 상태에서 React를 배워 취업을 한들 무슨 소용이 있을까요, React가 주류가 되지 않을 수도 있는데 말이죠. 따라서 글로 정리하면서 제대로 이해해보는 시간을 가져 봅니다.

## 리액트에서 랜더링이란

리액트에서 랜더링이란 컴포넌트에게 현재 props와 state를 기반으로 UI가 어떻게 생겼으면 좋겠는지 설명하도록 요청하는 프로세스입니다.
랜더링을 한다고 해서 바로 화면에 보여지는 것이 아니고 reconciliation 과정을 거쳐 실제 DOM에 반영 됩니다.

## 리액트 랜더링 과정

처음 랜더링 될 때는 메모리에 Virtual dom을 생성합니다. 이후, state와 props가 변경되면 바로 랜더단계와 커밋단계를 거쳐 리랜더링을 하게 됩니다.

### Virtual Dom

Virtual Dom은 메모리에 존재하는 가상의 dom 트리입니다. 실제 Dom에 접근하는 것이 아니라 메모리에 존재하는 가상의 DOM 트리를 조작하여 성능을 향상시키는 것이 목적입니다. 브라우저에서 Dom 연산은 비싸기 때문에 효율적으로 브라우저 연산을 하기 위한 목적으로 존재합니다. 직접 Dom을 조작할때 reflow가 빈번하게 발생할 수 있습니다. virtual dom을 사용하면 reflow를 최소화 할 수 있습니다.

### 랜더 단계

React가 상태 업데이트를 감지하면 해당 컴포넌트를 렌더링 큐(Render Queue)에 넣습니다. React는 렌더링을 예약하고 여러 개의 업데이트를 한 번에 처리하려고 합니다. (이 과정에서 진짜 Dom이 아닌 메모리 상에 있는 Virtual Dom을 이용하기에 성능에 대한 부담이 없습니다.) React는 렌더링 큐에 있는 모든 컴포넌트들에 대해 렌더 패스를 수행합니다.

렌더 패스는 렌더 단계를 실행하는 과정으로 다음과 같은 단계를 거칩니다.

1. 컴포넌트 실행 -> JSX를 기반으로 새로운 Virtual Dom을 생성
2. 이전 Virtual Dom과 비교하여 Reconciliation 수행 -> 변경된 부분을 찾아내고 이를 실제 Dom에 반영하기 위함.
3. 업데이트 할 부분을 결정

렌더 패스에서 중요한 것은, React가 상태가 변경된 모든 컴포넌트를 한 번에 처리하려고 한다는 것입니다.

이 부분에서 배칭 언급하면 좋을듯

### 커밋 단계

앞서 렌더 단계에서 새로 Virtual Dom을 만들어 기존 Virtual Dom과 비교하여 변경된 부분을 찾아내었다면 변경된 부분만 실제 DOM에 반영합니다. 만약 렌더 단계 이후, 변경된 부분이 없다면 실제 Dom에 반영하지 않게 됩니다. 리렌더링이 발생했다고 해서 실제 DOM이 업데이트 되는 것은 아닙니다.

### 맺음말

React는 상태(state)나 프롭(props)이 변경되면 바로 렌더링을 수행하는 것이 아니라, 업데이트 요청을 렌더링 큐(Render Queue)에 저장합니다.
즉, React는 렌더링을 예약하고, 여러 개의 업데이트를 한 번에 처리하려고 합니다. 새로 Virtual Dom을 생성하여 여러 변경 사항을 반영하고 이후에 이를 실제 Dom에 반영하여 reflow와 같은 브라우저 연산을 최소화 할 수 있습니다. 또한 새로 생성된 Virtual Dom과 이전 Virtual Dom을 비교하여 변경된 부분을 찾아내고 이를 실제 Dom에 반영하는 과정을 거치기 때문에 효율적입니다.
